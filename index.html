<html>
  <head>
    <title>Group 9 IDE</title>

    <link rel="stylesheet" href="css/codeslate.css" />
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/titleBar.css" />
    <link rel="stylesheet" href="css/jqueryui.css" />
    <link rel="stylesheet" href="css/customThemeBlock.css" />

    <link href="css/menu.css" rel="stylesheet" type="text/css" />

    <link href="css/spectrum.css" rel="stylesheet" type="text/css" />

    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap"
      rel="stylesheet"
    />

    <!-- Insert this line above script imports  -->
    <script>
      if (typeof module === 'object') {
        window.module = module;
        module = undefined;
      }
    </script>

    <!-- normal script imports etc  -->
    <script src="js/libraries/jquery.min.js"></script>

    <script src="js/libraries/jquery.menu.js"></script>
    <script src="js/libraries/ext-searchbox.js"></script>
    <script src="js/libraries/ext-beautify.js"></script>
    <script src="js/libraries/ext-error_marker.js"></script>
    <script src="js/libraries/ext-spellcheck.js"></script>
    <script src="js/libraries/jqueryui.js"></script>
    <script src="js/libraries/fontaw.js"></script>

    <!-- Insert this line after script imports -->
    <!--<script>if (window.module) module = window.module;</script>-->

    <script src="js/libraries/ace.js" type="text/javascript" charset="utf-8"></script>

    <script src="editor/modes/mode-javascript.js"></script>
    <script src="editor/modes/mode-java.js"></script>
    <script src="editor/modes/mode-html.js"></script>
    <script src="editor/modes/mode-css.js"></script>
    <script src="editor/modes/mode-c_cpp.js"></script>
    <script src="editor/modes/mode-json.js"></script>
    <script src="editor/modes/mode-php.js"></script>
    <script src="editor/modes/mode-python.js"></script>
    <script src="editor/modes/mode-typescript.js"></script>
    <script src="editor/modes/mode-c_cpp.js"></script>
    <script src="editor/modes/mode-xml.js"></script>
    <script src="editor/modes/mode-dart.js"></script>

    <!--<script src="theme-snippet-default.js"></script>-->
    <script src="theme-snippet-default.js"></script>

    <script src="editor/themes/theme-ambiance.js"></script>
    <script src="editor/themes/theme-tomorrow_night_bright.js"></script>
    <script src="editor/themes/theme-tomorrow_night_eighties.js"></script>
    <script src="editor/themes/theme-katzenmilch.js"></script>
    <script src="editor/themes/theme-dreamweaver.js"></script>
    <script src="editor/themes/theme-chrome.js"></script>
    <script src="editor/themes/theme-chaos.js"></script>
    <script src="editor/themes/theme-clouds.js"></script>
    <script src="editor/themes/theme-clouds_midnight.js"></script>

    <script src="editor/themes/theme-cobalt.js"></script>
    <script src="editor/themes/theme-crimson_editor.js"></script>
    <script src="editor/themes/theme-dawn.js"></script>
    <script src="editor/themes/theme-dracula.js"></script>
    <script src="editor/themes/theme-eclipse.js"></script>
    <script src="editor/themes/theme-github.js"></script>

    <script src="editor/themes/theme-gob.js"></script>
    <script src="editor/themes/theme-gruvbox.js"></script>
    <script src="editor/themes/theme-idle_fingers.js"></script>
    <script src="editor/themes/theme-kr_theme.js"></script>
    <script src="editor/themes/theme-kuroir.js"></script>
    <script src="editor/themes/theme-merbivore.js"></script>

    <script src="editor/themes/theme-merbivore_soft.js"></script>
    <script src="editor/themes/theme-mono_industrial.js"></script>
    <script src="editor/themes/theme-monokai.js"></script>
    <script src="editor/themes/theme-pastel_on_dark.js"></script>
    <script src="editor/themes/theme-solarized_dark.js"></script>
    <script src="editor/themes/theme-solarized_light.js"></script>

    <script src="editor/themes/theme-sqlserver.js"></script>
    <script src="editor/themes/theme-terminal.js"></script>
    <script src="editor/themes/theme-textmate.js"></script>
    <script src="editor/themes/theme-tomorrow.js"></script>
    <script src="editor/themes/theme-twilight.js"></script>
    <script src="editor/themes/theme-xcode.js"></script>

    <script src="ace-builds-master/src-min/snippets/php.js"></script>
    <script src="ace-builds-master/src-min/snippets/html.js"></script>

    <!-- themes end -->
  </head>

  <body>
    <div id="contextMenu">
      <!--  context menu -->
    </div>

    <div id="renameFileContainer">
      Rename...
      <input type="text" id="renameInput" />
    </div>

    <div class="container">
      <div class="titleBar titleBarStyle">
        <div class="windowTitle draggable preventSelect">
          <span id="currentFileName"> </span> Dee's Text Editor
        </div>

        <div class="windowControls windowControlsStyle preventSelect">
          <button id="minimise"><i class="far fa-window-minimize"></i></button>
          <button id="maximise"><i class="far fa-window-maximize"></i></button>
          <button id="quit"><i class="fas fa-times"></i></button>
        </div>

        <div id="menu-bar">
          <ul class="main-menu">
            <li>
              File
              <ul>
                <li class="icon save" onclick="createNewFile()">
                  <a href="#">New File<span>Ctrl+N</span></a>
                </li>
                <li onclick="selectFolder()">New Folder</li>

                <li class="separator"></li>
                <li class="icon save" onclick="saveFile()">
                  <a href="javascript:void(0)">Save<span>Ctrl+S</span></a>
                </li>

                <li class="icon save" onclick="showSaveDialogAndSaveFile()">
                  <a href="javascript:void(0)">Save As</a>
                </li>

                <li class="separator"></li>
              </ul>
            </li>
            <li>
              Window
              <ul>
                <li>
                  <a href="javascript:void(0)" onclick="toggleWidgets()"
                    >Widgets<span><input type="checkbox" id="widgetCheckbox" /></span
                  ></a>
                </li>
              </ul>
            </li>
            <li>
              Settings
              <ul>
                <li onclick='settings("theme")'>Themes</li>
              </ul>
            </li>

            <li>
              Help
              <ul>
                <li onclick="showShortcuts()">Shortcuts</li>
              </ul>
            </li>
          </ul>
          <div class="compileButtonsContainer">
            <button id="complileBtn">Compile</button>
            <button id="runBtn">Run</button>
            <button id="compileAndRunButton">Compile and run</button>
          </div>
        </div>
      </div>

      <div class="codingScreen preventSelect">
        <div class="explorerContainer explorerContainerStyles" id="resizableExplorer">
          <div class="filesContainer">
            <!--all the new and opened files are shown here-->
          </div>

          <div class="folderFiles">
            <!--all the contents of any folder is shown here-->
            <div class="folderTitle">
              <div id="folderName"></div>

              <button id="syncFiles" title="sync files"><i class="fas fa-sync-alt"></i></button>
              <button id="changeFolder">Change</button>
            </div>

            <div class="exploredFilesContainer"></div>
          </div>
        </div>

        <div class="editorContainer"></div>
        <div id="terminal" class="displayNone">
          <button id="closeTerminal">Close</button>
        </div>
      </div>
    </div>

    <!-- index.html -->

    <script src="js/libraries/spectrum.js"></script>
    <script src="js/globalContent.js"></script>
    <script src="js/titleBarStuff.js"></script>
    <script src="js/shortcuts.js"></script>
    <script src="js/codeslate.js"></script>
    <script src="js/widgetHandler.js"></script>
    <!-- <script src="main.js"></script> -->
    <script>
      var sys = require('sys');
      var exec = require('child_process').exec;
      // const { app } = require('electron');
      // var execFile = require('child_process').execFile;
      document.getElementById('complileBtn').addEventListener('click', compileJavaCode);
      document.getElementById('runBtn').addEventListener('click', runJavaCode);
      document
        .getElementById('compileAndRunButton')
        .addEventListener('click', runAndCompileJavaCode);

      function compileJavaCode() {
        document.getElementById('terminal').classList.remove('displayNone');
        // console.log(filePath);
        if (filePath !== null)
          exec(
            `${__dirname}\\scripts\\compile.bat ` +
              filePath +
              ` ${__dirname}\\scripts\\group_9_compiler.exe`,
            function (error, stdout, stderr) {
              // console.log(error)
              if (error !== null) {
                var outPut = document.createElement('P');
                var outPutText = document.createTextNode(error);
                outPut.appendChild(outPutText);
                document.getElementById('terminal').appendChild(outPut);
              } else {
                var outPut = document.createElement('P');
                var outPutText = document.createTextNode(stdout);
                outPut.appendChild(outPutText);
                document.getElementById('terminal').appendChild(outPut);
              }
            },
          );
      }

      function runJavaCode() {
        document.getElementById('terminal').classList.remove('displayNone');
        // console.log(filePath);
        if (filePath !== null)
          exec(
            `${__dirname}\\scripts\\run.bat ` + filePath + ` java`,
            function (error, stdout, stderr) {
              // console.log(error)
              if (error !== null) {
                var outPut = document.createElement('P');
                var outPutText = document.createTextNode(error);
                outPut.appendChild(outPutText);
                document.getElementById('terminal').appendChild(outPut);
              } else {
                var outPut = document.createElement('P');
                var outPutText = document.createTextNode(stdout);
                outPut.appendChild(outPutText);
                document.getElementById('terminal').appendChild(outPut);
              }
            },
          );
      }

      function runAndCompileJavaCode() {
        document.getElementById('terminal').classList.remove('displayNone');
        if (filePath !== null) {
          exec(
            `${__dirname}\\scripts\\compile.bat ` +
              filePath +
              ` ${__dirname}\\scripts\\group_9_compiler.exe`,
            function (error, stdout, stderr) {
              // console.log(error)
              if (error !== null) {
                var outPut = document.createElement('P');
                var outPutText = document.createTextNode(error);
                outPut.appendChild(outPutText);
                document.getElementById('terminal').appendChild(outPut);
              } else {
                var outPut = document.createElement('P');
                var outPutText = document.createTextNode(stdout);
                outPut.appendChild(outPutText);
                document.getElementById('terminal').appendChild(outPut);
              }
            },
          );

          exec(
            `${__dirname}\\scripts\\run.bat ` + filePath + ` java`,
            function (error, stdout, stderr) {
              // console.log(error)
              if (error !== null) {
                var outPut = document.createElement('P');
                var outPutText = document.createTextNode(error);
                outPut.appendChild(outPutText);
                document.getElementById('terminal').appendChild(outPut);
              } else {
                var outPut = document.createElement('P');
                var outPutText = document.createTextNode(stdout);
                outPut.appendChild(outPutText);
                document.getElementById('terminal').appendChild(outPut);
              }
            },
          );
        }
      }

      document.getElementById('closeTerminal').addEventListener('click', function () {
        document.getElementById('terminal').classList.add('displayNone');
      });
    </script>
  </body>
</html>
